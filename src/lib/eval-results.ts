/**
 * Ablation study results for /ablation.
 * Generated by: npx vitest run src/lib/ablation.test.ts
 * Dataset: CodeSearchNet Python (annotated) â€” 25 queries, 436 candidates
 * Date: 2026-02-27
 */

export interface AblationResultEntry {
  config: string;
  description: string;
  avgRecallAt5: number;
  avgMRR: number;
  avgNdcgAt10: number;
  avgLatencyUs: number;
}

export const ABLATION_RESULTS: AblationResultEntry[] = [
  {
    config: "Full Pipeline",
    description:
      "Hamming coarse retrieval + keyword retrieval + reciprocal rank fusion + cosine rerank",
    avgRecallAt5: 0.2955,
    avgMRR: 0.9733,
    avgNdcgAt10: 0.7655,
    avgLatencyUs: 11626,
  },
  {
    config: "No Quantization",
    description:
      "Full cosine vector retrieval + keyword retrieval + reciprocal rank fusion + cosine rerank",
    avgRecallAt5: 0.2955,
    avgMRR: 0.9733,
    avgNdcgAt10: 0.7642,
    avgLatencyUs: 11504,
  },
  {
    config: "Vector-Only",
    description:
      "Hamming coarse retrieval + cosine rerank only (no keyword retrieval, no RRF)",
    avgRecallAt5: 0.2955,
    avgMRR: 0.9733,
    avgNdcgAt10: 0.7655,
    avgLatencyUs: 11433,
  },
  {
    config: "No Reranking",
    description:
      "Hamming coarse retrieval + keyword retrieval + RRF output (no cosine rerank)",
    avgRecallAt5: 0.2611,
    avgMRR: 0.9733,
    avgNdcgAt10: 0.6767,
    avgLatencyUs: 11341,
  },
  {
    config: "CodeRAG Multi-Path",
    description:
      "Query expansion + per-path hybrid retrieval + path-level RRF + preference rerank",
    avgRecallAt5: 0.2978,
    avgMRR: 0.9733,
    avgNdcgAt10: 0.7802,
    avgLatencyUs: 17972,
  },
];

// Backward-compatible export used by the landing page.
export const STORAGE_COMPARISON = {
  float32PerVector: 384 * 4,
  binaryPerVector: Math.ceil(384 / 32) * 4,
  compressionRatio: 32,
  exampleRepoChunks: 500,
  get float32TotalKB() {
    return (this.float32PerVector * this.exampleRepoChunks) / 1024;
  },
  get binaryTotalKB() {
    return (this.binaryPerVector * this.exampleRepoChunks) / 1024;
  },
};
